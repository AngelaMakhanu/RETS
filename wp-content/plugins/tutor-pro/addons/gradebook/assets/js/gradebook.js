(()=>{function i(t,e,r,n,o,a,u){try{var c=t[a](u),i=c.value}catch(t){return void r(t)}c.done?e(i):Promise.resolve(i).then(n,o)}function n(c){return function(){var t=this,u=arguments;return new Promise(function(e,r){var n=c.apply(t,u);function o(t){i(n,e,r,o,a,"next",t)}function a(t){i(n,e,r,o,a,"throw",t)}o(void 0)})}}jQuery(document).ready(function(s){"use strict";var t=wp.i18n,d=t.__;t._x,t._n,t._nx;s(document).on("click",".tutor-gradebook-filter",function(t){var e,r="",n=window.location.href,o=s(".tutor-gradebook-filter-select option").filter(":selected").val(),r=n.includes("courseid")?((e=new URL(n)).searchParams.set("courseid",o),e.toString()):n+"&courseid="+o;window.location.href=r}),s(document).on("submit","#tutor-add-new-gradebook-form",function(){var e=n(regeneratorRuntime.mark(function t(e){var r,n,o,a,u,c,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),r=s(this),n=new FormData(document.getElementById("tutor-add-new-gradebook-form")),o=s("#tutor-add-new-grad-form-response"),t.next=6,l(n,e.target);case 6:return a=t.sent,t.next=9,a.json();case 9:if((a=t.sent).success)r.trigger("reset"),tutor_toast(d("Success","tutor-pro"),d("New Grade Added","tutor-pro"),"success"),location.reload();else for(o.html(""),u=0,c=Object.values(a.data);u<c.length;u++)i=c[u],o.append("<div><li class='tutor-alert tutor-alert-warning'>".concat(i,"</li></div>"));case 11:case"end":return t.stop()}},t,this)}));return function(t){return e.apply(this,arguments)}}());var e="#tutor-update-gradebook-form";function l(){return r.apply(this,arguments)}function r(){return(r=n(regeneratorRuntime.mark(function t(e,r){var n,o,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=r.querySelector(".tutor-btn-loading"),o=n.innerHTML,n.innerHTML='<div class="ball"></div>\n        <div class="ball"></div>\n        <div class="ball"></div>\n        <div class="ball"></div>',t.next=6,fetch(window._tutorobject.ajaxurl,{method:"POST",body:e});case 6:return a=t.sent,n.innerHTML=o,t.abrupt("return",a);case 11:t.prev=11,t.t0=t.catch(0),loadingButton=prevHtml,tutor_toast(d("Operation failed","tutor"),t.t0,"error");case 15:case"end":return t.stop()}},t,null,[[0,11]])}))).apply(this,arguments)}s(document).on("click",".tutor-open-grade-update-modal",function(t){t=t.target;s("".concat(e," input[name=gradebook_id]")).val(t.dataset.id),s("".concat(e," input[name=grade_name]")).val(t.dataset.name),s("".concat(e," input[name=grade_point]")).val(t.dataset.point),s("".concat(e," input[name=percent_to]")).val(t.dataset.maximum),s("".concat(e," input[name=percent_from]")).val(t.dataset.minimum),document.getElementById("tutor-update-grade-color").value=t.dataset.color,s("".concat(e," .button.wp-color-result")).css("background-color",t.dataset.color)}),s(e).on("submit",function(){var e=n(regeneratorRuntime.mark(function t(e){var r,n,o,a,u,c;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),r=new FormData(document.getElementById("tutor-update-gradebook-form")),n=document.getElementById("tutor-update-grade-form-response"),t.next=5,l(r,e.target);case 5:return o=t.sent,t.next=8,o.json();case 8:if((o=t.sent).success)tutor_toast(d("Success","tutor-pro"),d("Grade updated","tutor-pro"),"success"),location.reload();else for(a=0,u=Object.values(o.data);a<u.length;a++)c=u[a],n.innerHTML+="<div><li class='tutor-alert tutor-alert-warning'>".concat(c,"</li></div>");case 10:case"end":return t.stop()}},t)}));return function(t){return e.apply(this,arguments)}}())})})();