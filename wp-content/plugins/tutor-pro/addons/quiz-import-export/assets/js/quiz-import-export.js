(()=>{"use strict";const u=(t,e)=>{const a=wp.i18n["__"];var{data:t={}}=t||{},{message:e=e||a("Something Went Wrong!","tutor")}=t;return e};jQuery(document).ready(function(r){wp.i18n.__;r(document).on("click",".btn-csv-download",function(t){t.preventDefault();var e=r(this);r.ajax({url:ajaxurl,type:"POST",data:{quiz_id:r(this).data("id"),action:"quiz_export_data"},beforeSend:function(){e.addClass("tutor-updating-message")},success:function(t){var e,a,n;t.success?(e="data:text/csv;charset=utf-8,",t.data.output_quiz_data.forEach(function(t){t=t.join(",");e+=t+"\r\n"}),a=encodeURI(e),(n=document.createElement("a")).setAttribute("href",a),n.setAttribute("download","tutor-quiz-"+t.data.title+".csv"),document.body.appendChild(n),n.click()):tutor_toast("Error!",u(t),"error")},complete:function(){e.removeClass("tutor-updating-message")}})}),r(document).on("change",'#tutor-course-content-builder-root input[name="csv_file"]',function(t){var e,a,n=r(this).prop("files"),o=r(this),i=r(this).parent().find("button");n[0]?0<n[0].size?(e=tutor_get_nonce_data(!0),(a=new FormData).append("action","quiz_import_data"),a.append("csv_file",n[0]),a.append("topic_id",r(this).parent().find("input[name='csv_file']").data("topic")),a.append(e.key,e.value),r.ajax({url:ajaxurl,type:"POST",data:a,cache:!1,contentType:!1,processData:!1,beforeSend:function(){i.addClass("tutor-updating-message")},success:function(t){t.success?(o.val(""),o.closest(".tutor-topics-wrap").find(".tutor-lessons").append(t.data.html)):tutor_toast("Error",u(t),"error")},complete:function(){i.removeClass("tutor-updating-message")}})):alert("File is Empty."):alert("No File Selected."),r(this).val("")}),r(document).on("click",".tutor-import-quiz-button button",function(t){t.preventDefault(),r(this).parent().find(".tutor-csv-file").click()})})})();