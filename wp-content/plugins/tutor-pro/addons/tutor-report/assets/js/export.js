jQuery(document).ready(function(o){document.getElementById("download_analytics").onclick=function(n){var e=n.target;e.classList.add("active");var t=e.innerHTML;o.ajax({url:window._tutorobject.ajaxurl,type:"POST",data:{action:"export_analytics"},beforeSend:function(){e.innerHTML=window.tutorDotLoader()},success:function(n){n.success&&function(n){var e=n.students,t=n.earnings,o=n.discounts.length,i=n.refunds,n=new JSZip;{var c;e.length&&(c=Object.keys(e[0]),e=[c.join(","),e.map(function(e){return c.map(function(n){return e[n]}).join(",")}).join("\n")].join("\n"),e=new Blob([e]),n.file("students.csv",e))}{var a;t.length&&(a=Object.keys(t[0]),t=[a.join(","),t.map(function(e){return a.map(function(n){return e[n]}).join(",")}).join("\n")].join("\n"),t=new Blob([t]),n.file("earnings.csv",t))}{var r;o.length&&(r=Object.keys(o[0]),o=[r.join(","),o.map(function(e){return r.map(function(n){return e[n]}).join(",")}).join("\n")].join("\n"),o=new Blob([o]),n.file("discounts.csv",o))}{var u;i.length&&(u=Object.keys(i[0]),i=[u.join(","),i.map(function(e){return u.map(function(n){return e[n]}).join(",")}).join("\n")].join("\n"),i=new Blob([i]),n.file("refunds.csv",i))}try{n.generateAsync({type:"blob"}).then(function(n){var e=new Blob([n],{type:"application/zip"}),n=document.createElement("a");document.body.appendChild(n),n.download="analytics-data.zip",n.href=URL.createObjectURL(e),n.click(),URL.revokeObjectURL(n.href)})}catch(n){alert(n)}}(n.data)},complete:function(){e.innerHTML=t,e.classList.remove("active")}})}});