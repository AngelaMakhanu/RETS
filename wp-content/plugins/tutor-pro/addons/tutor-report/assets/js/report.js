(()=>{"use strict";function u(t,e,n,r,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function d(){var c;return c=regeneratorRuntime.mark(function t(e){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(window._tutorobject.ajaxurl,{method:"POST",body:e});case 3:return n=t.sent,t.abrupt("return",n);case 7:t.prev=7,t.t0=t.catch(0),tutor_toast(__("Operation failed","tutor"),t.t0,"error");case 10:case"end":return t.stop()}},t,null,[[0,7]])}),(d=function(){var t=this,i=arguments;return new Promise(function(e,n){var r=c.apply(t,i);function o(t){u(r,e,n,o,a,"next",t)}function a(t){u(r,e,n,o,a,"throw",t)}o(void 0)})}).apply(this,arguments)}function s(t,e,n,r,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function f(c){return function(){var t=this,i=arguments;return new Promise(function(e,n){var r=c.apply(t,i);function o(t){s(r,e,n,o,a,"next",t)}function a(t){s(r,e,n,o,a,"throw",t)}o(void 0)})}}function v(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(n="Object"===n&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,e=function(){};return{s:e,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){i=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(i)throw o}}}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}jQuery(document).ready(function(n){var t=wp.i18n,i=t.__,c=(t._x,t._n,t._nx,document.getElementById("tutor-common-confirmation-modal")),u=document.getElementById("tutor-common-confirmation-form"),r=document.getElementById("tutor-common-confirmation-modal-content");function e(t,e){var n=new URL(window.location.href),r=n.searchParams;return r.set(t,e),n.search=r.toString(),r.set("paged",1),n.search=r.toString(),n.toString()}n(document).on("click",".tutor-quiz-attempt-delete-btn",function(t){t.preventDefault();var e=n(this);n.ajax({url:ajaxurl,type:"POST",data:{attempt_id:e.attr("data-attempt-id"),action:"treport_quiz_atttempt_delete"},beforeSend:function(){e.addClass("updating-message")},success:function(t){t.success&&e.closest("tr").remove()},complete:function(){e.removeClass("updating-message")}})}),n(".tutor-report-category").on("change",function(t){window.location=e("cat",n(this).val())}),n(".tutor-report-sort").on("change",function(t){window.location=e("order",n(this).val())}),n(".tutor-report-date").on("change",function(t){window.location=e("date",n(this).val())}),n(document).on("click",".tutor-report-search-btn",function(t){window.location=e("search",n(".tutor-report-search").val())}),n(document).on("click",".tutor-report-search-action",function(t){t.preventDefault(),window.location=e("search",n(".tutor-report-search").val())}),n(document).on("click",".details-link",function(t){t.preventDefault(),n(this).hasClass("active")?n(this).removeClass("active"):n(this).addClass("active");t=n("#table-toggle-"+n(this).data("count"));t.hasClass("open")?t.removeClass("open"):t.addClass("open")});var o,t=document.querySelectorAll(".tutor-delete-recent-reviews"),s=document.getElementById("tutor-admin-reviews-table"),a=v(t);try{for(a.s();!(o=a.n()).done;){var l=o.value;l&&(l.onclick=function(){var e=f(regeneratorRuntime.mark(function t(e){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=e.currentTarget.dataset.id,u&&(u.elements.action.value="tutor_delete_review",u.elements.id.value=n),r&&(r.innerHTML='\n          <div class="tutor-modal-icon">\n          <img src="https://i.imgur.com/Nx6U2u7.png" alt=""/>\n          </div>\n          <div class="tutor-modal-text-wrap">\n          <h3 class="tutor-modal-title">\n           '.concat(i("Wait!","tutor"),"\n          </h3>\n          <p>\n            ").concat(i("Are you sure you would like perform this action? We suggest you proceed with caution.","tutor"),"\n          </p>\n          </div>\n        "));case 3:case"end":return t.stop()}},t)}));return function(t){return e.apply(this,arguments)}}())}}catch(t){a.e(t)}finally{a.f()}u&&(u.onsubmit=function(){var e=f(regeneratorRuntime.mark(function t(e){var n,r,o,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),n=new FormData(u),r=u.querySelector(".tutor-btn-loading"),o=r.innerHTML,r.innerHTML='<div class="ball"></div>\n      <div class="ball"></div>\n      <div class="ball"></div>\n      <div class="ball"></div>',t.next=7,function(){return d.apply(this,arguments)}(n);case 7:if(a=t.sent,r.innerHTML=o,c.classList.contains("tutor-is-active")&&c.classList.remove("tutor-is-active"),a.ok)return t.next=13,a.json();t.next=17;break;case 13:t.sent?s&&"tutor_delete_review"==n.get("action")?(tutor_toast(i("Delete","tutor"),i("Course has been deleted ","tutor"),"success"),s.rows.length<3?location.reload():(a=s.querySelector('a[data-id="'.concat(n.get("id"),'"]')))&&a.closest("tr").remove()):location.reload():tutor_toast(i("Failed","tutor"),i("Course delete failed ","tutor"),"error"),t.next=18;break;case 17:tutor_toast(i("Failed","tutor"),i("Course delete failed ","tutor"),"error");case 18:case"end":return t.stop()}},t)}));return function(t){return e.apply(this,arguments)}}())})})();